(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports=function e(t,n){for(var o=0;o<n.length;o++){var i=n[o];if(Array.isArray(i))e(t,i);else{if(("number"==typeof i||"boolean"==typeof i||i instanceof Date||i instanceof RegExp)&&(i=i.toString()),"string"==typeof i){if(/^[\n\r\s]+$/.test(i))continue;if(t.lastChild&&"#text"===t.lastChild.nodeName){t.lastChild.nodeValue+=i;continue}i=document.createTextNode(i)}i&&i.nodeType&&t.appendChild(i)}}};

},{}],2:[function(require,module,exports){
function embed(e,n){function o(n){return n?`${window.location.origin}/image://${e.sse.image}`:`${window.location.origin}/${e.form.address}`}e.events.EMBED_UPDATE="embed:update",e.embed={frozen:!1,url:o(!1)},n.on("DOMContentLoaded",function(){n.on(e.events.EMBED_UPDATE,function(d){e.embed.frozen=d,e.embed.url=o(d),n.emit("render")})})}module.exports=embed;

},{}],3:[function(require,module,exports){
(function (process){
function form(e,a){e.events.FORM_SET_EXAMPLE_DOCUMENT="form:set-example-document",e.events.FORM_UPDATE="form:update",e.events.FORM_SUBMIT="form:submit";var n=validateFormdata();(e.form=n.state).values.address="",e.form.values.token="",n.add("address",function(e){}),n.add("token",function(e){}),a.on("DOMContentLoaded",function(){"production"!==process.env.NODE_ENV&&(n.validate("token","platypus"),a.emit("render")),e.params.wildcard&&(n.validate("address",e.params.wildcard),a.emit("render")),a.on(e.events.FORM_SUBMIT,function(){var e={body:n.formData()};xhr.post("/~launch",e,function(e,a,n){e&&console.error("err",e),console.log("OK",n)})}),a.on(e.events.FORM_SET_EXAMPLE_DOCUMENT,function(){e.form.values.address="github://stencila/examples/diamonds",a.emit("render")});var o=nanobounce();a.on(e.events.FORM_UPDATE,function(e){n.validate(e.target.name,e.target.value),o(function(){a.emit("render")})})})}var validateFormdata=require(32),nanobounce=require(16),xhr=require(35);module.exports=form;

}).call(this,require(39))
},{"16":16,"32":32,"35":35,"39":39}],4:[function(require,module,exports){
(function (process){
const css=0,choo=require(11);null;const app=choo();"production"!==process.env.NODE_ENV&&(app.use(require(7)()),app.use(require(8)())),app.use(require(5)),app.use(require(3)),app.use(require(2)),app.route("/",require(6)),app.route("/*",require(6)),app.mount("body");

}).call(this,require(39))
},{"11":11,"2":2,"3":3,"38":38,"39":39,"5":5,"6":6,"7":7,"8":8}],5:[function(require,module,exports){
function sse(e,t){function n(){return e.sse.url?100:Math.min(e.sse.log.length/20*100,80)}e.events.SSE_LAUNCH_DOCUMENT="sse:launch-document",e.sse={log:[],step:null,image:null,url:"",stderr:0,stdout:0,percent:0},t.on("DOMContentLoaded",function(){t.on(e.events.SSE_LAUNCH_DOCUMENT,function(){const s=e.form.address+"?token="+e.form.token,r=new window.EventSource("/~launch/"+s);e.sse={log:[],step:null,image:null,url:"",stderr:0,stdout:0,percent:0},r.addEventListener("stdout",function(s){e.sse.log.push({type:"stdout",data:s.data}),e.sse.percent=n(),e.sse.stdout+=1,t.emit("render")},!1),r.addEventListener("stderr",function(s){e.sse.log.push({type:"stderr",data:s.data}),e.sse.percent=n(),e.sse.stderr+=1,t.emit("render")},!1),r.addEventListener("step",function(n){e.sse.step=n.data,t.emit("render")},!1),r.addEventListener("image",function(n){e.sse.image=n.data,t.emit("render")},!1),r.addEventListener("goto",function(s){e.sse.url="/~session/"+s.data+"/~",e.sse.percent=n(),t.emit("render")},!1),r.addEventListener("end",function(e){r.close()},!1),r.onerror=function(e){t.emit("log:error",e),r.close()}})})}module.exports=sse;

},{}],6:[function(require,module,exports){
function mainView(e,t){function n(n){if("Enter"===n.key)return r();t(e.events.FORM_UPDATE,n)}function r(n){n&&n.preventDefault(),t(e.events.FORM_SUBMIT)}const a=e.form,s=function(){var e=require(1),t=document.createElement("form");t.onsubmit=arguments[7],t.setAttribute("class","flex flex-column align-right");var n=document.createElement("label");n.setAttribute("class","f4 b"),n.setAttribute("for","address"),e(n,["\n        Document address\n      "]);var r=document.createElement("input");r.setAttribute("name","address"),r.setAttribute("type","text"),r.setAttribute("aria-label","address"),r.setAttribute("value",arguments[0]),r.onchange=arguments[1],r.onkeyup=arguments[2],r.setAttribute("placeholder","For example, github://stencila/examples/diamonds"),r.setAttribute("class","mt2 pa2 f5 b--black");var a=document.createElement("span");a.setAttribute("class","mt2 lh-copy");var s=document.createElement("a");s.setAttribute("href","http://sibyl.surge.sh/"),s.setAttribute("data-no-routing","data-no-routing"),s.setAttribute("target","_blank"),s.setAttribute("class","bn black pointer link underline"),e(s,["docs"]);var i=document.createElement("button");i.onclick=arguments[3],i.setAttribute("class","bn bg-white pointer pa0 ma0 link underline"),e(i,["\n          try an example\n        "]),e(a,["\n        Enter the document address. Is this your first time? See the\n        ",s,"\n        or\n        ",i,"\n      "]);var c=document.createElement("label");c.setAttribute("class","f4 b mt3"),c.setAttribute("for","token"),e(c,["\n        Beta token\n      "]);var u=document.createElement("input");u.setAttribute("name","token"),u.setAttribute("type","text"),u.setAttribute("aria-label","token"),u.setAttribute("value",arguments[4]),u.onchange=arguments[5],u.onkeyup=arguments[6],u.setAttribute("placeholder","Token"),u.setAttribute("class","mt2 pa2 f5 b--black");var l=document.createElement("span");l.setAttribute("class","mt2 lh-copy"),e(l,["\n        During the beta, you need to provide a beta token.\n      "]);var o=document.createElement("input");return o.setAttribute("type","submit"),o.setAttribute("aria-label","open"),o.setAttribute("value","Open"),o.setAttribute("class","mw4 mt2 mh0 bg-white f5 b--black pa2 link pointer"),e(t,["\n      ",n,"\n      ",r,"\n      ",a,"\n      ",c,"\n      ",u,"\n      ",l,"\n      ",o,"\n    "]),t}(a.values.address,n,n,function(n){n.preventDefault(),t(e.events.FORM_SET_EXAMPLE_DOCUMENT)},a.values.token,n,n,r);var i=function(){var e=require(1),t=document.createElement("header");t.setAttribute("class","w-100");var n=document.createElement("section");n.setAttribute("class","flex flex-column flex-row-ns mw7 pa3 center items-end justify-end");var r=document.createElement("a");r.setAttribute("href","http://sibyl.surge.sh/"),r.setAttribute("class","black f4"),e(r,["\n          Docs\n        "]);var a=document.createElement("a");return a.setAttribute("href","https://community.stenci.la/"),a.setAttribute("class","black f4 mt2 mt0-ns ml0 ml3-ns"),e(a,["\n          Help\n        "]),e(n,["\n        ",r,"\n        ",a,"\n      "]),e(t,["\n      ",n,"\n    "]),t}();return function(){var e=require(1),t=document.createElement("body");t.setAttribute("class","sans-serif pb3");var n=document.createElement("main");n.setAttribute("class","flex flex-column mw7 pa3 center");var r=document.createElement("section");r.setAttribute("class","flex flex-column justify-between content-stretch");var a=document.createElement("section");a.setAttribute("class","w-100"),e(a,["\n            ",arguments[0],"\n          "]);var s=document.createElement("section");s.setAttribute("class","w-100"),e(s,["\n            ",arguments[1],"\n          "]);var i=document.createElement("section");return i.setAttribute("class","w-100"),e(i,["\n            ",arguments[2],"\n          "]),e(r,["\n          ",a,"\n          ",s,"\n          ",i,"\n        "]),e(n,["\n        ",r,"\n      "]),e(t,["\n      ",arguments[3],"\n      ",n,"\n    "]),t}(s,createProgress(e,t),createLinks(e,t),i)}function createProgress(e,t){return e.sse.log.length?function(){var e=require(1),t=document.createElement("div");return t.setAttribute("class","w-100"),e(t,["\n      ",arguments[0],"\n      ",arguments[1],"\n      ",arguments[2],"\n    "]),t}(function(){var e=require(1),t=document.createElement("div");t.setAttribute("class","w-100 mt4");var n=document.createElement("h3");n.setAttribute("class","f4 b mt3"),n.setAttribute("for","token"),e(n,["\n          Progress\n        "]);var r=document.createElement("div");return r.setAttribute("style","width: "+arguments[0]+"%; height: 2em"),r.setAttribute("class","bg-gray"),e(t,["\n        ",n,"\n        ",r,"\n      "]),t}(e.sse.percent),e.sse.log.length?function(){var e=require(1),t=document.createElement("details");t.setAttribute("class","w-100 gray");var n=document.createElement("summary");e(n,["Log"]);var r=document.createElement("div");return r.setAttribute("class","f6 pre"),e(r,["\n          ",arguments[0],"\n        "]),e(t,["\n        ",n,"\n        ",r,"\n      "]),t}(e.sse.log.map(function(e){var t;return"stdout"===e.type?t="terminal-white":"stderr"===e.type&&(t="terminal-red"),function(){var e=require(1),t=document.createElement("pre");return t.setAttribute("class",arguments[0]+" ma0 lh-copy"),e(t,["\n                ",arguments[1],"\n              "]),t}(t,e.data)})):(require(1),document.createElement("div")),function(){var t;return t=e.sse.url?function(){var e=require(1),t=document.createElement("a");return t.setAttribute("href",arguments[0]),t.setAttribute("data-no-routing","data-no-routing"),t.setAttribute("target","_blank"),t.setAttribute("class","mh0 pa2 f5 ba bw1 bg-green b--green link white pointer"),e(t,["\n          View\n        "]),t}(e.sse.url):function(){var e=require(1),t=document.createElement("a");return t.setAttribute("class","w-20 mh0 pa2 f5 ba bw1 bg-gray b--gray link white"),e(t,["\n          ",arguments[0],"ing\n        "]),t}(e.sse.step),function(){var e=require(1),t=document.createElement("div");return t.setAttribute("class","mt4"),e(t,["\n        ",arguments[0],"\n      "]),t}(t)}()):function(){require(1);var e=document.createElement("div");return e.setAttribute("class","fl"),e}()}function createLinks(e,t){if(e.sse.image){var n=e.embed.frozen,r=e.embed.url;return function(){var e=require(1),t=document.createElement("details");t.setAttribute("class","w-100 mt4");var n=document.createElement("summary");e(n,["Embed"]);var r=document.createElement("p");e(r,['Put a "Open in Stencila" button in your document']);var a=document.createElement("form"),s=document.createElement("label"),i=document.createElement("input");i.setAttribute("type","radio"),i.setAttribute("name","frozen"),i.setAttribute("value","no"),arguments[1]&&i.setAttribute(arguments[1],arguments[0]),i.onclick=arguments[2],e(s,["\n          ",i,"\n          Unfrozen link to latest version\n        "]);var c=document.createElement("label"),u=document.createElement("input");u.setAttribute("type","radio"),u.setAttribute("name","frozen"),u.setAttribute("value","yes"),arguments[4]&&u.setAttribute(arguments[4],arguments[3]),u.onclick=arguments[5],e(c,["\n          ",u,"\n          Frozen link to current version\n        "]),e(a,["\n        ",s,"\n        ",c,"\n      "]);var l=document.createElement("h4");e(l,["Markdown"]);var o=document.createElement("pre");o.setAttribute("class","pre"),e(o,["[Open in Stencila](",arguments[6],")"]);var m=document.createElement("h4");e(m,["HTML"]);var b=document.createElement("pre");return b.setAttribute("class","pre"),e(b,['&lt;a href="',arguments[7],'"&gt;Open in Stencila&lt;/a&gt;']),e(t,["\n      ",n,"\n      ",r,"\n      ",a,"\n      ",l,"\n      ",o,"\n      ",m,"\n      ",b,"\n    "]),t}(n?"":"checked",n?"":"checked",t.bind(t,e.events.EMBED_UPDATE,!1),n?"checked":"",n?"checked":"",t.bind(t,e.events.EMBED_UPDATE,!0),r,r)}}var html=require(10),css=0;null,module.exports=mainView;

},{"1":1,"10":10,"38":38}],7:[function(require,module,exports){
function expose(){return function(o,n){window.choo={},window.choo.state=o,window.choo.emit=function(o,e){n.emit(o,e)},window.choo.on=function(o,e){n.on(o,e)}}}module.exports=expose;

},{}],8:[function(require,module,exports){
function logger(n){n=n||{};var o=!0;return function(n,r){var e=ChooInstrument(r),i=nanologger("choo");e.on("log:debug",i.debug.bind(i)),e.on("log:info",i.info.bind(i)),e.on("log:warn",i.warn.bind(i)),e.on("log:error",i.error.bind(i)),e.on("log:fatal",i.fatal.bind(i)),e.on("event",function(n,o,r){if(r){var e=r.duration.toFixed(),t=e<50?"info":"warn";void 0!==o?i[t](n,o,e+"ms"):i[t](n,e+"ms")}else void 0!==o?i.info(n,o):i.info(n)}),e.on("use",function(n,o){i.debug("use",{count:n},o+"ms")}),e.on("unhandled",function(n,o){i.error("No listeners for "+n)}),e.on("DOMContentLoaded",function(n){if(!n)return i.info("DOMContentLoaded");i[n.interactive<1e3?"info":"warn"]("DOMContentLoaded",n.interactive+"ms to interactive")}),e.on("render",function(n){if(!n)return i.info("render");var r=n.render.duration.toFixed(),e="render";o&&(o=!1,e="initial "+e);var t=Math.min((600/r).toFixed(),60);60===t?i.info(e,t+"fps",r+"ms"):i.warn(e,t+"fps",r+"ms",{render:n.render.duration.toFixed()+"ms",morph:n.morph.duration.toFixed()+"ms"})}),e.on("resource-timing-buffer-full",function(){i.error("The browser's Resource Resource timing buffer is full. Cannot store any more timing information")}),e.start()}}var nanologger=require(19),ChooInstrument=require(9);module.exports=logger;

},{"19":19,"9":9}],9:[function(require,module,exports){
function ChooInstrument(e){if(!(this instanceof ChooInstrument))return new ChooInstrument(e);this.hasWindow="undefined"!=typeof window,this.hasIdleCallback=this.hasWindow&&window.requestIdleCallback,this.hasPerformance=this.hasWindow&&window.performance&&window.performance.getEntriesByName,this.emitter=e,this.listeners={},this.buffer={use:[],render:[],events:{}}}function sumDurations(e){return e.reduce(function(e,r){return e+r.duration},0).toFixed()}var onPerformance=require(27),onIdle=require(26);module.exports=ChooInstrument,ChooInstrument.prototype.on=function(e,r){this.listeners[e]=r},ChooInstrument.prototype.start=function(){var e=this;this.hasPerformance&&(window.performance.onresourcetimingbufferfull=function(){var r=e.listeners["resource-timing-buffer-full"];r&&r()}),onPerformance(function(r){if(r&&"measure"===r.entryType){var n=r.name;if(/choo\.morph/.test(n))e.buffer.render.push(r);else if(/choo\.route/.test(n))e.buffer.render.push(r);else if(/choo\.render/.test(n))e.buffer.render.push(r);else if(/choo\.use/.test(n))e.buffer.use.push(r);else if(/choo\.emit/.test(n)&&!/log:/.test(n)){var t=e.listeners.event;if(t){var o=n.match(/choo\.emit\('(.*)'\)/)[1];if("render"===o||"DOMContentLoaded"===o)return;var s=n.match(/\[(\d+)\]/)[1],i=e.buffer.events[s];e.buffer.events[s]=null,t(o,i,r)}}if(3===e.buffer.render.length){var f=e.listeners.render;if(!f)return;for(var a={};e.buffer.render.length;){var u=e.buffer.render.pop(),d=u.name;/choo\.render/.test(d)?a.render=u:/choo\.morph/.test(d)?a.morph=u:a.route=u}f(a)}}}),this.emitter.on("*",function(r,n,t){var o=/^log:(\w{4,5})/.exec(r);if(e.hasPerformance||"render"!==r)if("DOMContentLoaded"===r)e._emitLoaded();else if(o){var s=e.listeners["log:"+o[1]];s&&s(r,n)}else if(e.emitter.listeners(r).length)"render"!==r&&e.hasPerformance&&(e.buffer.events[t]=n);else{var i=e.listeners.unhandled;i&&i(r,n)}else{var f=e.listeners.render;f&&f()}})},ChooInstrument.prototype._emitLoaded=function(){var e=this;onIdle(function(){var r=e.listeners.DOMContentLoaded,n=e.listeners.use,t=e.hasWindow&&window.performance&&window.performance.timing;if(r&&t&&r({interactive:t.domInteractive-t.navigationStart,loaded:t.domContentLoadedEventEnd-t.navigationStart}),e.hasPerformance){var o=sumDurations(e.buffer.use);n&&n(e.buffer.use.length,o)}else n()})};

},{"26":26,"27":27}],10:[function(require,module,exports){
module.exports={};

},{}],11:[function(require,module,exports){
function Choo(t){if(!(this instanceof Choo))return new Choo(t);var e={default:(t=t||{}).defaultRoute||"/404",curry:!0};this._events={DOMCONTENTLOADED:"DOMContentLoaded",REPLACESTATE:"replaceState",PUSHSTATE:"pushState",NAVIGATE:"navigate",POPSTATE:"popState",RENDER:"render"},this._historyEnabled=void 0===t.history||t.history,this._hrefEnabled=void 0===t.href||t.href,this._tree=null,this.router=nanorouter(e),this.emitter=nanobus("choo.emit"),this.state={events:this._events}}var scrollToAnchor=require(30),documentReady=require(12),nanotiming=require(25),nanorouter=require(24),nanomorph=require(20),nanohref=require(18),nanoraf=require(23),nanobus=require(17);module.exports=Choo;var HISTORY_OBJECT={};Choo.prototype.route=function(t,e){var n=this;this.router.on(t,function(o){return function(){n.state.params=o,n.state.route=t;var r=nanotiming("choo.route('"+t+"')"),i=e(n.state,function(t,e){n.emitter.emit(t,e)});return r(),i}})},Choo.prototype.use=function(t){var e=nanotiming("choo.use");t(this.state,this.emitter,this),e()},Choo.prototype.start=function(){var t=this;this._historyEnabled&&(this.emitter.prependListener(this._events.NAVIGATE,function(){t.emitter.emit(t._events.RENDER),setTimeout(scrollToAnchor.bind(null,window.location.hash),0)}),this.emitter.prependListener(this._events.POPSTATE,function(){t.emitter.emit(t._events.NAVIGATE)}),this.emitter.prependListener(this._events.PUSHSTATE,function(e){window.history.pushState(HISTORY_OBJECT,null,e),t.emitter.emit(t._events.NAVIGATE)}),this.emitter.prependListener(this._events.REPLACESTATE,function(e){window.history.replaceState(HISTORY_OBJECT,null,e),t.emitter.emit(t._events.NAVIGATE)}),window.onpopstate=function(){t.emitter.emit(t._events.POPSTATE)},t._hrefEnabled&&nanohref(function(e){var n=e.href;n!==window.location.href&&t.emitter.emit(t._events.PUSHSTATE,n)}));var e=this._createLocation();return this._tree=this.router(e),this.emitter.prependListener(t._events.RENDER,nanoraf(function(){var e=nanotiming("choo.render"),n=t.router(t._createLocation()),o=nanotiming("choo.morph");nanomorph(t._tree,n),o(),e()})),documentReady(function(){t.emitter.emit(t._events.DOMCONTENTLOADED)}),this._tree},Choo.prototype.mount=function(t){var e=this;documentReady(function(){var n=nanotiming("choo.render"),o=e.start();e._tree=document.querySelector(t);var r=nanotiming("choo.morph");nanomorph(e._tree,o),r(),n()})},Choo.prototype.toString=function(t,e){return this.state=e||{},this.router(t).toString()},Choo.prototype._createLocation=function(){return window.location.pathname.replace(/\/$/,"")+window.location.hash.replace(/^#/,"/")};

},{"12":12,"17":17,"18":18,"20":20,"23":23,"24":24,"25":25,"30":30}],12:[function(require,module,exports){
"use strict";function ready(e){var t=document.readyState;if("complete"===t||"interactive"===t)return setTimeout(e,0);document.addEventListener("DOMContentLoaded",function(){e()})}module.exports=ready;

},{}],13:[function(require,module,exports){
function forEach(r,t,o){if(!isFunction(t))throw new TypeError("iterator must be a function");arguments.length<3&&(o=this),"[object Array]"===toString.call(r)?forEachArray(r,t,o):"string"==typeof r?forEachString(r,t,o):forEachObject(r,t,o)}function forEachArray(r,t,o){for(var n=0,a=r.length;n<a;n++)hasOwnProperty.call(r,n)&&t.call(o,r[n],n,r)}function forEachString(r,t,o){for(var n=0,a=r.length;n<a;n++)t.call(o,r.charAt(n),n,r)}function forEachObject(r,t,o){for(var n in r)hasOwnProperty.call(r,n)&&t.call(o,r[n],n,r)}var isFunction=require(15);module.exports=forEach;var toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty;

},{"15":15}],14:[function(require,module,exports){
(function (global){
var win;win="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},module.exports=win;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],15:[function(require,module,exports){
function isFunction(o){var t=toString.call(o);return"[object Function]"===t||"function"==typeof o&&"[object RegExp]"!==t||"undefined"!=typeof window&&(o===window.setTimeout||o===window.alert||o===window.confirm||o===window.prompt)}module.exports=isFunction;var toString=Object.prototype.toString;

},{}],16:[function(require,module,exports){
function Nanobounce(n){n=n||256;var o=null,u=null,e=!1;return function(t){function l(){var t=Date.now()-u;t>n?(u=null,e=!1,o(),o=null):window.setTimeout(l,t)}o=t,u=Date.now(),e||(e=!0,window.setTimeout(l,n))}}module.exports=Nanobounce;

},{}],17:[function(require,module,exports){
function Nanobus(t){if(!(this instanceof Nanobus))return new Nanobus(t);this._name=t||"nanobus",this._starListeners=[],this._listeners={}}var splice=require(29),nanotiming=require(25);module.exports=Nanobus,Nanobus.prototype.emit=function(t,s){var e=nanotiming(this._name+"('"+t+"')"),i=this._listeners[t];return i&&i.length>0&&this._emit(this._listeners[t],s),this._starListeners.length>0&&this._emit(this._starListeners,t,s,e.uuid),e(),this},Nanobus.prototype.on=Nanobus.prototype.addListener=function(t,s){return"*"===t?this._starListeners.push(s):(this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(s)),this},Nanobus.prototype.prependListener=function(t,s){return"*"===t?this._starListeners.unshift(s):(this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].unshift(s)),this},Nanobus.prototype.once=function(t,s){function e(){s.apply(i,arguments),i.removeListener(t,e)}var i=this;return this.on(t,e),this},Nanobus.prototype.prependOnceListener=function(t,s){function e(){s.apply(i,arguments),i.removeListener(t,e)}var i=this;return this.prependListener(t,e),this},Nanobus.prototype.removeListener=function(t,s){function e(t,s){if(t){var e=t.indexOf(s);return-1!==e?(splice(t,e,1),!0):void 0}}return"*"===t?(this._starListeners=this._starListeners.slice(),e(this._starListeners,s)):(void 0!==this._listeners[t]&&(this._listeners[t]=this._listeners[t].slice()),e(this._listeners[t],s))},Nanobus.prototype.removeAllListeners=function(t){return t?"*"===t?this._starListeners=[]:this._listeners[t]=[]:(this._starListeners=[],this._listeners={}),this},Nanobus.prototype.listeners=function(t){var s="*"!==t?this._listeners[t]:this._starListeners,e=[];if(s)for(var i=s.length,n=0;n<i;n++)e.push(s[n]);return e},Nanobus.prototype._emit=function(t,s,e,i){if(void 0!==t){void 0===e&&(e=s,s=null);for(var n=t.length,r=0;r<n;r++){var o=t[r];s?void 0!==i?o(s,e,i):o(s,e):o(e)}}};

},{"25":25,"29":29}],18:[function(require,module,exports){
function href(t,n){n=n||window.document,window.onclick=function(e){if(!(e.button&&0!==e.button||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){var o=function t(e){if(e&&e!==n){if("a"!==e.localName)return t(e.parentNode);if(void 0===e.href)return t(e.parentNode);if(sameOrigin(e.href))return e}}(e.target);o&&(o.hasAttribute(noRoutingAttrName)||(e.preventDefault(),t(o)))}}}function sameOrigin(t){var n=window.location,e=n.protocol+"//"+n.hostname;return n.port&&(e+=":"+n.port),t&&0===t.indexOf(e)}module.exports=href;var noRoutingAttrName="data-no-routing";

},{}],19:[function(require,module,exports){
function Nanologger(o){if(!(this instanceof Nanologger))return new Nanologger(o);this._name=o||"";try{this.logLevel=window.localStorage.getItem("logLevel")||"info"}catch(o){this.logLevel="info"}this._logLevel=levels[this.logLevel]}function color(o){return"color: "+o+";"}function getTimeStamp(){var o=new Date;return pad(o.getHours().toString())+":"+pad(o.getMinutes().toString())+":"+pad(o.getSeconds().toString())}function pad(o){return 2!==o.length?0+o:o}var emojis={debug:"ðŸ›",info:"âœ¨",warn:"âš ï¸",error:"ðŸš¨",fatal:"ðŸ’€"},levels={debug:20,info:30,warn:40,error:50,fatal:60},colors={foreground:"#d3c0c8",background:"#2d2d2d",black:"#2d2d2d",red:"#f2777a",green:"#99cc99",yellow:"#ffcc66",blue:"#6699cc",magenta:"#cc99cc",cyan:"#66cccc",white:"#d3d0c8",brightBlack:"#747369"};module.exports=Nanologger,Nanologger.prototype.debug=function(){for(var o=["debug"],r=0,t=arguments.length;r<t;r++)o.push(arguments[r]);this._print.apply(this,o)},Nanologger.prototype.info=function(){for(var o=["info"],r=0,t=arguments.length;r<t;r++)o.push(arguments[r]);this._print.apply(this,o)},Nanologger.prototype.warn=function(){for(var o=["warn"],r=0,t=arguments.length;r<t;r++)o.push(arguments[r]);this._print.apply(this,o)},Nanologger.prototype.error=function(){for(var o=["error"],r=0,t=arguments.length;r<t;r++)o.push(arguments[r]);this._print.apply(this,o)},Nanologger.prototype.fatal=function(){for(var o=["fatal"],r=0,t=arguments.length;r<t;r++)o.push(arguments[r]);this._print.apply(this,o)},Nanologger.prototype._print=function(o){if(!(levels[o]<this._logLevel)){var r=getTimeStamp(),t=emojis[o],e=this._name||"unknown",n="error"===o||o.fatal?colors.red:"warn"===o?colors.yellow:colors.green,l=[],a=[null],c="%c%s "+t+" %c%s";a.push(color(colors.brightBlack),r),a.push(color(colors.magenta),e);for(var s=1,g=arguments.length;s<g;s++){var i=arguments[s];"string"==typeof i?1===s?(c+=" %c%s",a.push(color(n)),a.push(i)):/ms$/.test(i)?(c+=" %c%s",a.push(color(colors.brightBlack)),a.push(i)):(c+=" %c%s",a.push(color(colors.white)),a.push(i)):"number"==typeof i?(c+=" %c%d",a.push(color(colors.magenta)),a.push(i)):l.push(i)}a[0]=c,l.forEach(function(o){a.push(o)}),console.log.apply(console,a)}};

},{}],20:[function(require,module,exports){
function nanomorph(e,a){return walk(a,e)}function walk(e,a){return a?e?e.isSameNode&&e.isSameNode(a)?a:e.tagName!==a.tagName?e:(morph(e,a),updateChildren(e,a),a):null:e}function updateChildren(e,a){for(var i,d,l,o,r=0,n=0;i=a.childNodes[n],d=e.childNodes[n-r],i||d;n++)if(d)if(i)if(same(d,i))(l=walk(d,i))!==i&&(a.replaceChild(l,i),r++);else{o=null;for(var m=n;m<a.childNodes.length;m++)if(same(a.childNodes[m],d)){o=a.childNodes[m];break}o?((l=walk(d,o))!==o&&r++,a.insertBefore(l,i)):d.id||i.id?(a.insertBefore(d,i),r++):(l=walk(d,i))!==i&&(a.replaceChild(l,i),r++)}else a.appendChild(d),r++;else a.removeChild(i),n--}function same(e,a){return e.id?e.id===a.id:e.isSameNode?e.isSameNode(a):e.tagName===a.tagName&&(e.type===TEXT_NODE&&e.nodeValue===a.nodeValue)}var morph=require(22),TEXT_NODE=3;module.exports=nanomorph;

},{"22":22}],21:[function(require,module,exports){
module.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onmouseenter","onmouseleave","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"];

},{}],22:[function(require,module,exports){
function morph(e,t){var u=e.nodeType,a=e.nodeName;u===ELEMENT_NODE&&copyAttrs(e,t),u!==TEXT_NODE&&u!==COMMENT_NODE||(t.nodeValue=e.nodeValue),"INPUT"===a?updateInput(e,t):"OPTION"===a?updateOption(e,t):"TEXTAREA"===a&&updateTextarea(e,t),copyEvents(e,t)}function copyAttrs(e,t){for(var u=t.attributes,a=e.attributes,r=null,n=null,l=null,i=null,o=a.length-1;o>=0;--o)l=(i=a[o]).name,r=i.namespaceURI,n=i.value,r?(l=i.localName||l,t.getAttributeNS(r,l)!==n&&t.setAttributeNS(r,l,n)):t.hasAttribute(l)?t.getAttribute(l)!==n&&("null"===n||"undefined"===n?t.removeAttribute(l):t.setAttribute(l,n)):t.setAttribute(l,n);for(var v=u.length-1;v>=0;--v)!1!==(i=u[v]).specified&&(l=i.name,(r=i.namespaceURI)?(l=i.localName||l,e.hasAttributeNS(r,l)||t.removeAttributeNS(r,l)):e.hasAttributeNS(null,l)||t.removeAttribute(l))}function copyEvents(e,t){for(var u=0;u<eventsLength;u++){var a=events[u];e[a]?t[a]=e[a]:t[a]&&(t[a]=void 0)}}function updateOption(e,t){updateAttribute(e,t,"selected")}function updateInput(e,t){var u=e.value,a=t.value;updateAttribute(e,t,"checked"),updateAttribute(e,t,"disabled"),u!==a&&(t.setAttribute("value",u),t.value=u),"null"===u&&(t.value="",t.removeAttribute("value")),e.hasAttributeNS(null,"value")?"range"===t.type&&(t.value=u):t.removeAttribute("value")}function updateTextarea(e,t){var u=e.value;if(u!==t.value&&(t.value=u),t.firstChild&&t.firstChild.nodeValue!==u){if(""===u&&t.firstChild.nodeValue===t.placeholder)return;t.firstChild.nodeValue=u}}function updateAttribute(e,t,u){e[u]!==t[u]&&(t[u]=e[u],e[u]?t.setAttribute(u,""):t.removeAttribute(u))}var events=require(21),eventsLength=events.length,ELEMENT_NODE=1,TEXT_NODE=3,COMMENT_NODE=8;module.exports=morph;

},{"21":21}],23:[function(require,module,exports){
"use strict";function nanoraf(n,r){r||(r=window.requestAnimationFrame);var a=!1,o=null;return function(){null!==o||a||(a=!0,r(function(){a=!1;for(var r=o.length,t=new Array(r),u=0;u<r;u++)t[u]=o[u];n.apply(n,t),o=null})),o=arguments}}module.exports=nanoraf;

},{}],24:[function(require,module,exports){
function Nanorouter(e){function r(e){return n?(e=pathname(e,isLocalFile),e===a?t():(a=e,(t=o(e))())):o(e)}var o=wayfarer((e=e||{}).default||"/404"),n=e.curry||!1,t=null,a=null;return r.router=o,r.on=function(e,r){e=e.replace(/^[#\/]/,""),o.on(e,r)},r}function pathname(e,r){return(e=r?e.replace(stripElectron,""):e.replace(prefix,"")).replace(suffix,"").replace(normalize,"/")}var wayfarer=require(33),isLocalFile=/file:\/\//.test("object"==typeof window&&window.location&&window.location.origin),electron="^(file://|/)(.*.html?/?)?",protocol="^(http(s)?(://))?(www.)?",domain="[a-zA-Z0-9-_.]+(:[0-9]{1,5})?(/{1})?",qs="[?].*$",stripElectron=new RegExp(electron),prefix=new RegExp(protocol+domain),normalize=new RegExp("#"),suffix=new RegExp(qs);module.exports=Nanorouter;

},{"33":33}],25:[function(require,module,exports){
function nanotiming(r){function e(e){var f="end-"+n+"-"+r;perf.mark(f),onIdle(function(){var a=r+" ["+n+"]";perf.measure(a,o,f),perf.clearMarks(o),perf.clearMarks(f),e&&e(r)})}if(!hasPerf)return noop;var n=(100*perf.now()).toFixed(),o="start-"+n+"-"+r;return perf.mark(o),e.uuid=n,e}function noop(r){r&&onIdle(r)}var onIdle=require(26),perf="undefined"!=typeof window&&window.performance,hasPerf=perf&&perf.mark;module.exports=nanotiming;

},{"26":26}],26:[function(require,module,exports){
function onIdle(d,e){e=e||dftOpts;var n;return hasIdle?(n=window.requestIdleCallback(d,e),window.cancelIdleCallback.bind(window,n)):hasWindow?(n=setTimeout(d,0),clearTimeout.bind(window,n)):void 0}var dftOpts={},hasWindow="undefined"!=typeof window,hasIdle=hasWindow&&window.requestIdleCallback;module.exports=onIdle;

},{}],27:[function(require,module,exports){
function onPerformance(e){function n(e){var n=e.entryType;"measure"===n?window.performance.clearMeasures(e.name):"resource"===n&&window.performance.clearResourceTimings()}var r="undefined"!=typeof window&&window.PerformanceObserver;if(r){var o=new r(function(r){r.getEntries().forEach(function(r){onIdle(function(){e(r),n(r)})})});return o.observe({entryTypes:["frame","measure","navigation","resource","longtask"]}),window.performance.getEntries().forEach(function(r){onIdle(function(){e(r),n(r)})}),window["obs"+window.performance.now()]=o,o.disconnect.bind(o)}}var onIdle=require(26);module.exports=onPerformance;

},{"26":26}],28:[function(require,module,exports){
var trim=require(31),forEach=require(13),isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)};module.exports=function(r){if(!r)return{};var t={};return forEach(trim(r).split("\n"),function(r){var i=r.indexOf(":"),e=trim(r.slice(0,i)).toLowerCase(),o=trim(r.slice(i+1));void 0===t[e]?t[e]=o:isArray(t[e])?t[e].push(o):t[e]=[t[e],o]}),t};

},{"13":13,"31":31}],29:[function(require,module,exports){
"use strict";module.exports=function(t,e,r){var n,o=t.length;if(!(e>=o||0===r)){var f=o-(r=e+r>o?o-e:r);for(n=e;n<f;++n)t[n]=t[n+r];t.length=f}};

},{}],30:[function(require,module,exports){
function scrollToAnchor(o,c){if(o)try{var r=document.querySelector(o);r&&r.scrollIntoView(c)}catch(o){}}module.exports=scrollToAnchor;

},{}],31:[function(require,module,exports){
function trim(r){return r.replace(/^\s*|\s*$/g,"")}exports=module.exports=trim,exports.left=function(r){return r.replace(/^\s*/,"")},exports.right=function(r){return r.replace(/\s*$/,"")};

},{}],32:[function(require,module,exports){
function ValidateFormdata(){if(!(this instanceof ValidateFormdata))return new ValidateFormdata;this.validLength=0,this.validators={},this.length=0,this.state={valid:!1,pristine:{},values:{},errors:{}}}module.exports=ValidateFormdata,ValidateFormdata.prototype.add=function(t,a){this.validators[t]=a,this.state.pristine[t]=!0,this.length+=1},ValidateFormdata.prototype.validate=function(t,a){var i=this.validators[t],e=this.state.pristine[t],s=this.state.errors[t],r=i(a);this.state.pristine[t]=!1,this.state.errors[t]=r,this.state.values[t]=a,e?r||(this.validLength+=1):s&&!r&&(this.validLength+=1),this.state.valid=this.validLength===this.length},ValidateFormdata.prototype.formData=function(){var t=this.state.values;return Object.keys(t).reduce(function(a,i){return a.append(i,t[i]),a},new window.FormData)};

},{}],33:[function(require,module,exports){
function Wayfarer(r){function e(r){for(var e=new Array(arguments.length),n=1;n<e.length;n++)e[n]=arguments[n];var i=t.match(r);if(i&&i.cb){e[0]=i.params;var c=i.cb;return c.apply(c,e)}var f=t.match(a);if(f&&f.cb){e[0]=f.params;var o=f.cb;return o.apply(o,e)}throw new Error("route '"+r+"' did not match")}if(!(this instanceof Wayfarer))return new Wayfarer(r);var a=(r||"").replace(/^\//,""),t=trie();return e._trie=t,e.emit=e,e.on=function(r,a){return r=r||"/",a.route=r,a&&a._wayfarer&&a._trie?t.mount(r,a._trie.trie):t.create(r).cb=a,e},e._wayfarer=!0,e}var trie=require(34);module.exports=Wayfarer;

},{"34":34}],34:[function(require,module,exports){
function Trie(){if(!(this instanceof Trie))return new Trie;this.trie={nodes:{}}}var mutate=require(37),xtend=require(36);module.exports=Trie,Trie.prototype.create=function(e){function n(e,t){var o=r.hasOwnProperty(e)&&r[e];if(!1===o)return t;var i=null;return/^:|^\*/.test(o)?(t.nodes.hasOwnProperty("$$")?i=t.nodes.$$:(i={nodes:{}},t.nodes.$$=i),"*"===o[0]&&(t.wildcard=!0),t.name=o.replace(/^:|^\*/,"")):t.nodes.hasOwnProperty(o)?i=t.nodes[o]:(i={nodes:{}},t.nodes[o]=i),n(e+1,i)}var r=e.replace(/^\//,"").split("/");return n(0,this.trie)},Trie.prototype.match=function(e){function n(e,o){if(void 0!==o){var i=r[e];if(void 0===i)return o;if(o.nodes.hasOwnProperty(i))return n(e+1,o.nodes[i]);if(o.wildcard){try{t.wildcard=decodeURIComponent(r.slice(e).join("/"))}catch(r){return n(e,void 0)}return o.nodes.$$}if(o.name){try{t[o.name]=decodeURIComponent(i)}catch(r){return n(e,void 0)}return n(e+1,o.nodes.$$)}return n(e+1)}}var r=e.replace(/^\//,"").split("/"),t={},o=n(0,this.trie);if(o)return o=xtend(o),o.params=t,o},Trie.prototype.mount=function(e,n){var r=e.replace(/^\//,"").split("/"),t=null,o=null;if(1===r.length)o=r[0],t=this.create(o);else{var i=r.splice(0,r.length-1).join("/");o=r[0],t=this.create(i)}mutate(t.nodes,n.nodes),n.name&&(t.name=n.name),t.nodes[""]&&(Object.keys(t.nodes[""]).forEach(function(e){"nodes"!==e&&(t[e]=t.nodes[""][e])}),mutate(t.nodes,t.nodes[""].nodes),delete t.nodes[""].nodes)};

},{"36":36,"37":37}],35:[function(require,module,exports){
"use strict";function forEachArray(e,t){for(var r=0;r<e.length;r++)t(e[r])}function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function initParams(e,t,r){var n=e;return isFunction(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=xtend(t,{uri:e}),n.callback=r,n}function createXHR(e,t,r){return t=initParams(e,t,r),_createXHR(t)}function _createXHR(e){function t(){var e=void 0;if(e=a.response?a.response:a.responseText||getXml(a),R)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(c),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,s(e,X)}function n(){if(!u){var r;clearTimeout(c);var n=X,o=null;return 0!==(r=e.useXDR&&void 0===a.status?200:1223===a.status?204:a.status)?(n={body:t(),statusCode:r,method:p,headers:{},url:d,rawRequest:a},a.getAllResponseHeaders&&(n.headers=parseHeaders(a.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),s(o,n,n.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var o=!1,s=function(t,r,n){o||(o=!0,e.callback(t,r,n))},a=e.xhr||null;a||(a=e.cors||e.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var i,u,c,d=a.url=e.uri||e.url,p=a.method=e.method||"GET",l=e.body||e.data,f=a.headers=e.headers||{},m=!!e.sync,R=!1,X={body:void 0,headers:{},statusCode:0,method:p,url:d,rawRequest:a};if("json"in e&&!1!==e.json&&(R=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),l=JSON.stringify(!0===e.json?l:e.json))),a.onreadystatechange=function(){4===a.readyState&&setTimeout(n,0)},a.onload=n,a.onerror=r,a.onprogress=function(){},a.onabort=function(){u=!0},a.ontimeout=r,a.open(p,d,!m,e.username,e.password),m||(a.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(c=setTimeout(function(){if(!u){u=!0,a.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}},e.timeout)),a.setRequestHeader)for(i in f)f.hasOwnProperty(i)&&a.setRequestHeader(i,f[i]);else if(e.headers&&!isEmpty(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(a.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(a),a.send(l||null),a}function getXml(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function noop(){}var window=require(14),isFunction=require(15),parseHeaders=require(28),xtend=require(36);module.exports=createXHR,createXHR.XMLHttpRequest=window.XMLHttpRequest||noop,createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:window.XDomainRequest,forEachArray(["get","put","post","patch","head","delete"],function(e){createXHR["delete"===e?"del":e]=function(t,r,n){return r=initParams(t,r,n),r.method=e.toUpperCase(),_createXHR(r)}});

},{"14":14,"15":15,"28":28,"36":36}],36:[function(require,module,exports){
function extend(){for(var r={},e=0;e<arguments.length;e++){var t=arguments[e];for(var n in t)hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;

},{}],37:[function(require,module,exports){
function extend(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;

},{}],38:[function(require,module,exports){

},{}],39:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}]},{},[4]);
